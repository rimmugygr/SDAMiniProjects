<div class="container mt-5">

  <div class="row">
    <div class="col-9">
      <!-- breadcrumb -->
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a routerLink="/dashboard" routerLinkActive="active">Dashboard</a></li>
          <li class="breadcrumb-item"><a routerLink="/employees" routerLinkActive="active">Employees</a></li>
          <li class="breadcrumb-item active" aria-current="page">{{pageModel.pageMode.toLowerCase()}}</li>
        </ol>
      </nav>
    </div>
    <div class="col-3" *ngIf="isDetailsMode()">
      <button type="button"
              class="btn btn-lg btn-outline-secondary mr-3"
              routerLink="/employees/edit/{{currentEmployee.id}}">Edit</button>
      <button type="button"
              class="btn btn-lg btn-outline-secondary"
              (click)="onDeleted()">Deleted</button>
    </div>
  </div>

  <div class="alert alert-success alert-dismissible fade show " role="alert">
    <div style="text-align: center;"><strong>Success</strong> Employee saved</div>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div *ngIf="isError" class="alert alert-danger alert-dismissible fade show" role="alert">
    <div style="text-align: center;"><strong>Error</strong> Employee not saved</div>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <form [formGroup]="employeeForm" (ngSubmit)="onFormSubmit()" novalidate>
    <div class="header">Contact information</div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="firstNameId">First name</label>
        <input formControlName="firstName" type="text" class="form-control" id="firstNameId">
        <span *ngIf="ifRequired('firstName')">
                Please confirm your email address.
        </span>
      </div>
      <div class="form-group col-md-6">
        <label for="lastNameId">Last name</label>
        <input formControlName="lastName" type="text" class="form-control" id="lastNameId">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-8">
        <label for="companyId">Company</label>
        <input formControlName="company" type="text" class="form-control" id="companyId">
      </div>
      <div class="form-group col-md-4">
        <label for="statusId">Status</label>
        <select class="form-control" formControlName="status" id="statusId">
          <option *ngFor="let employeeStatus of employeesStatusEnum | keyvalue" [value]="employeeStatus.key">
            {{ employeeStatus.key.slice(0,1).toUpperCase() + employeeStatus.key.slice(1).toLowerCase().split('_').join('\n') }}
          </option>
        </select>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="emailId">Email</label>
        <input formControlName="email" type="email" class="form-control" id="emailId">
      </div>
      <div class="form-group col-md-4">
        <label for="phoneId">Phone</label>
        <input formControlName="phoneNumber" type="text" class="form-control" id="phoneId">
      </div>
      <div class="form-group col-md-2">
        <label for="dateOfBirthId">Birth Date</label>
        <input formControlName="dateOfBirth" type="text" class="form-control" id="dateOfBirthId" placeholder="YYYY-MM-DD" mask="0000-00-00" [dropSpecialCharacters]="false">
      </div>
    </div>
    <div class="header">Address</div>
    <div formGroupName="address">
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="streetId">Street</label>
          <input formControlName="street" type="text" class="form-control" id="streetId">
        </div>
        <div class="form-group col-md-4">
          <label for="buildingNumberId">Building number</label>
          <input formControlName="buildingNumber" type="text" class="form-control" id="buildingNumberId">
        </div>
        <div class="form-group col-md-2">
          <label for="flatNumberId">Flat number</label>
          <input formControlName="flatNumber" type="text" class="form-control" id="flatNumberId">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="cityId">City</label>
          <input formControlName="city" type="text" class="form-control" id="cityId">
        </div>
        <div class="form-group col-md-4">
          <label for="postalCodeId">Postal code</label>
          <input formControlName="postalCode" type="text" class="form-control" id="postalCodeId" mask="00-000" placeholder="00-000" [dropSpecialCharacters]="false">
        </div>
        <div class="form-group col-md-2">
          <label for="countryId">Country</label>
          <input formControlName="country" type="text" class="form-control" id="countryId">
        </div>
      </div>
    </div>
    <!-- buttons   -->
    <div class="row">
      <div class="col-9">
        <button class="btn btn-lg btn-primary" [routerLink]="onCancel()">Cancel</button>
      </div>
      <div class="col-3">
        <button *ngIf="isCreateMode()" type="submit" class="btn btn-lg btn-primary" [disabled]="!employeeForm.valid">Create</button>
        <button *ngIf="isEditMode()" type="submit" class="btn btn-lg btn-primary" [disabled]="!employeeForm.valid">Update</button>
      </div>
    </div>
  </form>

</div>
<p>{{employeeForm.get('firstName').errors | json}}</p>
<p> {{ employeeForm.value | json}}</p>
<p>MODE IS: {{ pageModel | json }}</p>
<p> {{employee$| async| json}}</p>
